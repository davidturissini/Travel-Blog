/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2012 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.3                                                     *
 ********************************************************************/
(function(){var e,t=function(e,t){if("function"==typeof document.addEventListener||r.isIE8()){var i=!1;try{i=e instanceof Element}catch(o){i=!!e&&1===i.nodeType}i||"string"==typeof e||(t=e);var u=this,a=u.classes,f=u.settings=r.merge(u.defaults,{attachTo:e},t||{}),i=u.container=r.make("div",{"class":a.container}),l=u.calendars=[],c=_().day(f.weekStart),h,p=[],d,v,m;d=[];var g;v=0,h=f.months,r.isIE8()&&r.addClassName(i,"ie8");for(v=7;v--;)p.push(c.format("ddd").substr(0,f.columnHeaderLength)),c.add("days",1);s(u);if("object"==typeof f.subscribe)for(v in f.subscribe)f.subscribe.hasOwnProperty(v)&&u.subscribe(v,f.subscribe[v]);u._sel=[],f.selected&&u.setSelected(f.selected,!1),h=f.viewStartDate?_(f.viewStartDate,f.format):0<u._sel.length?_(u._sel[0]):_(),u.viewStartDate=h.date(1),(h={past:f.months-1,"today-past":f.months-1,any:2<f.months?Math.floor(f.months/2):0,"today-future":0,future:0}[this.settings.direction])&&_().month()==_(u.viewStartDate).month()&&(u.viewStartDate=_(u.viewStartDate).subtract({M:h}).date(1));if("function"==typeof f.blackout)u.blackout=f.blackout;else if(f.blackout){var y=n(f.blackout,f.parseSplitDelimiter);u.blackout=function(e){e=_(e).yearDay();if(1>e||!u._sel||1>u._sel.length)return!1;for(var t=y.length;t--;)if(y[t].yearDay()===e)return!0;return!1}}else u.blackout=function(){return!1};u.direction=u.directions[f.direction]?u.directions[f.direction]:u.directions.any;for(h=Math.max(f.months,1);h--;){d=r.make("div",{"class":a.calendar},i),d.setAttribute("data-cal-index",h),1<f.months&&(h==Math.max(f.months-1,1)?r.addClassName(d,a.monthFirst):0===h?r.addClassName(d,a.monthLast):r.addClassName(d,a.monthMiddle)),v=r.make("div",{"class":a.title},d),f.useYearNav||r.addClassName(v,a.disableYearNav),r.make("a",{"class":a.previousYear},v),r.make("a",{"class":a.previousMonth},v),r.make("a",{"class":a.nextYear},v),r.make("a",{"class":a.nextMonth},v),c=r.make("span",{"class":a.caption},v),m=r.make("div",{"class":a.header},d),v=0;do g=r.make("span",{},m),g.innerHTML=p[v];while(7>++v);m=r.make("div",{"class":a.days},d),v=0;for(d=[];42>v++;)d.push(r.make("span",{},m));l.push({caption:c,days:d}),h&&r.make("div",{"class":a.monthSeparator},i)}u.draw(),r.addEvent(i,"mousedown",function(e,t){var n;if(r.hasClassName(t,a.nextMonth))!u.disableNext&&!1!==u.publish("view-changed",u,["next-month"])&&(u.viewStartDate.add("months",1),u.draw());else if(r.hasClassName(t,a.previousMonth))!u.disablePreviousMonth&&!1!==u.publish("view-changed",u,["previous-month"])&&(u.viewStartDate.subtract("months",1),u.draw());else if(r.hasClassName(t,a.nextYear))!u.disableNext&&!1!==u.publish("view-changed",u,["next-year"])&&(u.viewStartDate.add("years",1),u.draw());else if(r.hasClassName(t,a.previousYear))!u.disablePreviousMonth&&!1!==u.publish("view-changed",u,["previous-year"])&&(u.viewStartDate.subtract("years",1),u.draw());else if(r.hasClassName(t.parentNode,a.days)&&r.hasClassName(t,a.dayActive)&&(n=t.getAttribute("data-date")))if(n=_(n,f.dayAttributeFormat).hours(12),!1!==u.publish("date-clicked",u,[n]))switch(f.mode){case"multiple":u.addSelected(n)||u.removeSelected(n);break;case"range":u.addSelected(n);break;default:u.addSelected(n)}return!1}),(f.attachTo=r.$(f.attachTo))&&f.attachTo.appendChild(i)}};t.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(t){return _(t).yearDay()>=e.yearDay()},"today-past":function(t){return _(t).yearDay()>e.yearDay()},any:function(){return!1},"today-future":function(t){return _(t).yearDay()<e.yearDay()},future:function(t){return _(t).yearDay()<=e.yearDay()}},getSelectedAsDates:function(){for(var e=[],t=0,n=this._sel.length;t<n;t++)e.push(this._sel[t].toDate());return e},getSelectedAsText:function(e){for(var t=[],n=0,r=this._sel.length;n<r;n++)t.push(this._sel[n].format(e||this.settings.format||"YYYY-MM-DD"));return t},getSelectedRaw:function(){for(var e=[],t=0,n=this._sel.length;t<n;t++)e.push(_(this._sel[t]));return e},getSelected:function(e){e=this.getSelectedAsText(e);switch(this.settings.mode){case"range":return e.splice(2),e.join(this.settings.rangeDelimiter);case"multiple":return e.join(this.settings.multipleDelimiter);default:return e[0]}},isSelected:function(e){e=_(e).yearDay();if(1>e||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case"range":var t=this._sel[0]?this._sel[0].yearDay():0,n=this._sel[1]?this._sel[1].yearDay():0;return t===e||n===e?1:!t||!n?0:e>t&&e<n||t<n&&e<t&&e>n?-1:!1;case"multiple":for(t=this._sel.length;t--;)if(this._sel[t].yearDay()===e)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===e}},setSelected:function(e,t){this._sel=n(e,this.settings.parseSplitDelimiter,this.settings.format),this._sel.sort(function(e,t){return e.yearDay()-t.yearDay()}),!1!==t&&this.draw()},addSelected:function(e,t){e=_(e).hours(12),this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(e);switch(this.settings.mode){case"multiple":if(this.isSelected(e))return!1;this._sel.push(e);break;case"range":1!==this._sel.length?this._sel=[e]:e.yearDay()>this._sel[0].yearDay()?this._sel[1]=e:this._sel=[e,this._sel[0]];break;default:this._sel=[e]}return this._sel.sort(function(e,t){return e.yearDay()-t.yearDay()}),this.publish("change",this),!1!==t&&this.draw(),!0},makeSelectedDateVisible:function(e){outOfViewMonth=_(e).date("1").diff(this.viewStartDate,"months"),0>outOfViewMonth?this.viewStartDate.subtract("months",1):0<outOfViewMonth&&outOfViewMonth>=this.settings.months&&this.viewStartDate.add("months",1)},removeSelected:function(e,t){for(var e=_(e).yearDay(),n=this._sel.length;n--;)if(this._sel[n].yearDay()===e)return this._sel.splice(n,1),this.publish("change",this),!1!==t&&this.draw(),!0;return!1},draw:function(){var t=_(this.viewStartDate).hours(12),n,i=this.classes,s,o,u,a=0,f,l=0,c,h=this.settings;f=this.calendars.length;do{n=_(t).date(1),n.day(n.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),s=this.calendars[a],s.caption.innerHTML=t.format(this.settings.titleFormat),l=0;do o=s.days[l],u=[],(c=this.isSelected(n))&&u.push({"-1":i.dayInRange,1:i.daySelected,"true":i.daySelected}[c]),n.month()!=t.month()?u.push(i.dayOutOfMonth):u.push(i.dayInMonth),(!this.blackout(n)&&!(this.direction(n)||n.month()!=t.month()&&!1===h.dayOutOfMonthClickable)||0<c)&&u.push(i.dayActive),n.yearDay()===e.yearDay()&&u.push(i.dayToday),c=n.format(this.settings.dayAttributeFormat),h.dateClassMap[c]&&u.push(h.dateClassMap[c]),o.innerHTML=n.format(h.dayNumberFormat),o.className=u.join(" "),o.setAttribute("data-date",c),n.add("days",1);while(42>++l);t.add("months",1)}while(++a<f);if(h.directionScrolling){n=-_().diff(t,"months");if("today-past"===h.direction||"past"===h.direction)0>n?(this.disableNextMonth=!1,r.removeClassName(this.container,i.disableNextMonth)):(this.disableNextMonth=!0,r.addClassName(this.container,i.disableNextMonth));else if("today-future"===h.direction||"future"===h.direction)n>=h.months?(this.disablePreviousMonth=!1,r.removeClassName(this.container,i.disablePreviousMonth)):(this.disablePreviousMonth=!0,r.addClassName(this.container,i.disablePreviousMonth));if("today-past"===h.direction||"past"===h.direction)0>=t.add({y:1}).diff(_(),"months")?(this.disableNextYear=!1,r.removeClassName(this.container,i.disableNextYear)):(this.disableNextYear=!0,r.addClassName(this.container,i.disableNextYear));else if("today-future"===h.direction||"future"===h.direction)0<=t.subtract({y:1}).diff(_(),"months")-(h.months-1)?(this.disablePreviousYear=!1,r.removeClassName(this.container,i.disablePreviousYear)):(this.disablePreviousYear=!0,r.addClassName(this.container,i.disablePreviousYear))}}};var n=function(e,t,n){var s=[];"string"==typeof e?e=e.split(t):r.isArray(e)||(e=[e]),t=e.length,i=0;do e[i]&&s.push(_(e[i],n).hours(12));while(++i<t);return s};window.Kalendae=t;var r=t.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(e){return"string"==typeof e?document.getElementById(e):e},$$:function(e){return document.querySelectorAll(e)},make:function(e,t,n){var r,e=document.createElement(e);if(t)for(r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);return n&&n.appendChild(e),e},isVisible:function(e){return 0<e.offsetWidth||0<e.offsetHeight},getStyle:function(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=window.getComputedStyle(e,null)[t]),n},domReady:function(e){/in/.test(document.readyState)?setTimeout(function(){r.domReady(e)},9):e()},addEvent:function(e,t,n){var r=function(t){var t=t||window.event,r=n.apply(e,[t,t.target||t.srcElement]);return!1===r&&(t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0)),r};return e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r,!1),r},removeEvent:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},hasClassName:function(e,t){if(!(e=r.$(e)))return!1;var n=e.className;return 0<n.length&&(n==t||RegExp("(^|\\s)"+t+"(\\s|$)").test(n))},addClassName:function(e,t){(e=r.$(e))&&!r.hasClassName(e,t)&&(e.className+=(e.className?" ":"")+t)},removeClassName:function(e,t){if(e=r.$(e))e.className=r.trimString(e.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))},isFixed:function(e){do if("fixed"===r.getStyle(e,"position"))return!0;while(e=e.offsetParent);return!1},scrollContainer:function(e){do{var t=r.getStyle(e,"overflow");if("auto"===t||"scroll"===t)return e}while((e=e.parentNode)&&e!=window.document.body);return null},getPosition:function(e,t){var n=e.offsetLeft,r=e.offsetTop,i={};if(!t)for(;e=e.offsetParent;)n+=e.offsetLeft,r+=e.offsetTop;return i[0]=i.left=n,i[1]=i.top=r,i},getHeight:function(e){return e.offsetHeight||e.scrollHeight},getWidth:function(e){return e.offsetWidth||e.scrollWidth},trimString:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var e=!0===arguments[0],t={},n=e?1:0;n<arguments.length;n++){var r=t,i=arguments[n];if("object"==typeof i){var s=void 0;for(s in i)i.hasOwnProperty(s)&&(e&&"object"==typeof r[s]&&"object"==typeof i[s]?_update(r[s],i[s]):r[s]=i[s])}}return t},isArray:function(e){return!(!e||!e.length||0===e.length||"object"!=typeof e||!e.constructor||e.nodeType||e.item)}};"function"==typeof document.addEventListener&&t.util.domReady(function(){for(var e=r.$$(".auto-kal"),n=e.length,i,s;n--;)i=e[n],s=i.getAttribute("data-kal"),s=null==s||""==s?{}:(new Function("return {"+s+"};"))(),"INPUT"===i.tagName?new t.Input(i,s):new t(r.merge(s,{attachTo:i}))}),t.Input=function(e,n){if("function"==typeof document.addEventListener||r.isIE8()){var i=this.input=r.$(e),s;if(!i||"INPUT"!==i.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var o=this,u=o.classes;opts=o.settings=r.merge(o.defaults,n),opts.attachTo=window.document.body,opts.selected?s=!0:opts.selected=i.value,t.call(o,opts);if(opts.closeButton){var a=r.make("a",{"class":u.closeButton},o.container);r.addEvent(a,"click",function(){i.blur()})}s&&(i.value=o.getSelected()),s=o.container;var f=!1;s.style.display="none",r.addClassName(s,u.positioned),r.addEvent(s,"mousedown",function(){f=!0}),r.addEvent(window.document,"mousedown",function(){f=!1}),r.addEvent(i,"focus",function(){o.setSelected(this.value),o.show()}),r.addEvent(i,"blur",function(){f?(f=!1,i.focus()):o.hide()}),r.addEvent(i,"keyup",function(){o.setSelected(this.value)}),(u=r.scrollContainer(i))&&r.addEvent(u,"scroll",function(){i.blur()}),o.subscribe("change",function(){i.value=o.getSelected()})}},t.Input.prototype=r.merge(t.prototype,{defaults:r.merge(t.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:r.merge(t.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var e=this.container,t=e.style,n=this.input,i=r.getPosition(n),s=r.scrollContainer(n),s=s?s.scrollTop:0;t.display="";switch(opts.side){case"left":t.left=i.left-r.getWidth(e)+this.settings.offsetLeft+"px",t.top=i.top+this.settings.offsetTop-s+"px";break;case"right":t.left=i.left+r.getWidth(n)+"px",t.top=i.top+this.settings.offsetTop-s+"px";break;case"top":t.left=i.left+this.settings.offsetLeft+"px",t.top=i.top-r.getHeight(e)+this.settings.offsetTop-s+"px";break;default:t.left=i.left+this.settings.offsetLeft+"px",t.top=i.top+r.getHeight(n)+this.settings.offsetTop-s+"px"}t.position=r.isFixed(n)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)}});var s=function(e){e||(e=this);var t=e.c_||{};e.publish=function(e,n,r){for(var i=(e=t[e])?e.length:0,s;i--;)if(s=e[i].apply(n,r||[]),"boolean"==typeof s)return s},e.subscribe=function(e,n,r){return t[e]||(t[e]=[]),r?t[e].push(n):t[e].unshift(n),[e,n]},e.unsubscribe=function(e){for(var n=t[e[0]],e=e[1],r=n?n.length:0;r--;)n[r]===e&&n.splice(r,1)}},o=Date,u=function(e,t){this._d=e,this._isUTC=!!t},a=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},f=function(e,t,n,r){var i="string"==typeof t,s=i?{}:t;return i&&r&&(s[t]=+r),t=(s.ms||s.milliseconds||0)+1e3*(s.s||s.seconds||0)+6e4*(s.m||s.minutes||0)+36e5*(s.h||s.hours||0),r=(s.d||s.days||0)+7*(s.w||s.weeks||0),s=(s.M||s.months||0)+12*(s.y||s.years||0),t&&e.setTime(+e+t*n),r&&e.setDate(e.getDate()+r*n),s&&(t=e.getDate(),e.setDate(1),e.setMonth(e.getMonth()+s*n),e.setDate(Math.min((new o(e.getFullYear(),e.getMonth()+1,0)).getDate(),t))),e},l=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return new o(e[0],e[1]||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0)},h=function(e,t){function n(t){var g;switch(t){case"M":return r+1;case"Mo":return r+1+d(r+1);case"MM":return a(r+1,2);case"MMM":return m.monthsShort[r];case"MMMM":return m.months[r];case"D":return i;case"Do":return i+d(i);case"DD":return a(i,2);case"DDD":return t=new o(s,r,i),g=new o(s,0,1),~~((t-g)/864e5+1.5);case"DDDo":return t=n("DDD"),t+d(t);case"DDDD":return a(n("DDD"),3);case"d":return u;case"do":return u+d(u);case"ddd":return m.weekdaysShort[u];case"dddd":return m.weekdays[u];case"w":return t=new o(s,r,i-u+5),g=new o(t.getFullYear(),0,4),~~((t-g)/864e5/7+1.5);case"wo":return t=n("w"),t+d(t);case"ww":return a(n("w"),2);case"YY":return a(s%100,2);case"YYYY":return s;case"a":return 11<f?v.pm:v.am;case"A":return 11<f?v.PM:v.AM;case"H":return f;case"HH":return a(f,2);case"h":return f%12||12;case"hh":return a(f%12||12,2);case"m":return l;case"mm":return a(l,2);case"s":return c;case"ss":return a(c,2);case"zz":case"z":return(e._d.toString().match(N)||[""])[0].replace(T,"");case"Z":return(0>p?"-":"+")+a(~~(Math.abs(p)/60),2)+":"+a(~~(Math.abs(p)%60),2);case"ZZ":return(0>p?"-":"+")+a(~~(10*Math.abs(p)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return h(e,m.longDateFormat[t]);default:return t.replace(/(^\[)|(\\)|\]$/g,"")}}var r=e.month(),i=e.date(),s=e.year(),u=e.day(),f=e.hours(),l=e.minutes(),c=e.seconds(),p=-e.zone(),d=m.ordinal,v=m.meridiem;return t.replace(x,n)},p=function(e,t){var n=[0,0,1,0,0,0,0],r=0,i=0,s=!1,u=e.match(k),a=t.match(C),f=Math.min(u.length,a.length),l,h;for(l=0;l<f;l++){var p=u[l],d=void 0;switch(a[l]){case"M":case"MM":n[1]=~~p-1;break;case"MMM":case"MMMM":for(d=0;12>d;d++)if(m.monthsParse[d].test(p)){n[1]=d;break}break;case"D":case"DD":case"DDD":case"DDDD":n[2]=~~p;break;case"YY":p=~~p,n[0]=p+(70<p?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(p);break;case"a":case"A":h="pm"===p.toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~p;break;case"m":case"mm":n[4]=~~p;break;case"s":case"ss":n[5]=~~p;break;case"Z":case"ZZ":s=!0,(d=(p||"").match(O))&&d[1]&&(r=~~d[1]),d&&d[2]&&(i=~~d[2]),d&&"+"===d[0]&&(r=-r,i=-i)}}return h&&12>n[3]&&(n[3]+=12),!1===h&&12===n[3]&&(n[3]=0),n[3]+=r,n[4]+=i,s?new o(o.UTC.apply({},n)):c(n)},d=function(e,t,n){var r=m.relativeTime[e];return"function"==typeof r?r(t||1,!!n,e):r.replace(/%d/i,t||1)},v=function(e,t){m.fn[e]=function(e){var n=this._isUTC?"UTC":"";return"undefined"!=typeof e?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}},m,g=Math.round,y={},b="undefined"!=typeof module,w="months monthsShort monthsParse weekdays weekdaysShort longDateFormat calendar relativeTime ordinal meridiem".split(" "),E,S=/^\/?Date\((\-?\d+)/i,x=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,T=/[^A-Z]/g,N=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,C=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,k=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,L=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,A=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],O=/([\+\-]|\d\d)/gi,M="Month Date Hours Minutes Seconds Milliseconds".split(" ");m=function(e,t){if(null===e||""===e)return null;var n;if(e&&e._d instanceof o)n=new o(+e._d);else if(t)if(l(t)){var r=e.match(k),i=99,s,a,f;for(s=0;s<t.length;s++){a=p(e,t[s]),f=r;for(var d=h(new u(a),t[s]).match(k),v=Math.min(f.length,d.length),m=Math.abs(f.length-d.length),g=0,y=void 0,y=0;y<v;y++)~~f[y]!==~~d[y]&&g++;f=g+m,f<i&&(i=f,n=a)}}else n=p(e,t);else if(n=S.exec(e),void 0===e)n=new o;else if(n)n=new o(+n[1]);else if(e instanceof o)n=e;else if(l(e))n=c(e);else if("string"==typeof e)if(n="YYYY-MM-DDT",L.exec(e)){for(r=0;3>r;r++)if(A[r][1].exec(e)){n+=A[r][0];break}n=p(e,n+"Z")}else n=new o(e);else n=new o(e);return new u(n)},m.utc=function(e,t){return l(e)?new u(new o(o.UTC.apply({},e)),!0):t&&e?m(e+" 0",t+" Z").utc():m(e).utc()},m.humanizeDuration=function(e,t,n){var e=+e,r=m.relativeTime;switch(t){case"seconds":e*=1e3;break;case"minutes":e*=6e4;break;case"hours":e*=36e5;break;case"days":e*=864e5;break;case"weeks":e*=6048e5;break;case"months":e*=2592e6;break;case"years":e*=31536e6;break;default:n=!!t}var t=!n,i=g(Math.abs(e)/1e3),s=g(i/60),o=g(s/60),u=g(o/24),a=g(u/365),i=45>i&&["s",i]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===u&&["d"]||25>=u&&["dd",u]||45>=u&&["M"]||345>u&&["MM",g(u/30)]||1===a&&["y"]||["yy",a];return i[2]=t,t=d.apply({},i),n?(0>=e?r.past:r.future).replace(/%s/i,t):t},m.version="1.5.0",m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",m.lang=function(e,t){var n,r;r=[];if(t){for(n=0;12>n;n++)r[n]=RegExp("^"+t.months[n]+"|^"+t.monthsShort[n].replace(".",""),"i");t.monthsParse=t.monthsParse||r,y[e]=t}if(y[e])for(n=0;n<w.length;n++)r=w[n],m[r]=y[e][r]||m[r];else b&&(n=require("./lang/"+e),m.lang(e,n))},m.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"}}),m.isMoment=function(e){return e instanceof u},m.fn=u.prototype={clone:function(){return m(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return h(this,e?e:m.defaultFormat)},add:function(e,t){return this._d=f(this._d,e,1,t),this},subtract:function(e,t){return this._d=f(this._d,e,-1,t),this},diff:function(e,t,n){var e=m(e),r=6e4*(this.zone()-e.zone()),r=this._d-e._d-r,i=this.year()-e.year(),s=this.month()-e.month(),e=this.date()-e.date(),t="months"===t?12*i+s+e/30:"years"===t?i+s/12:"seconds"===t?r/1e3:"minutes"===t?r/6e4:"hours"===t?r/36e5:"days"===t?r/864e5:"weeks"===t?r/6048e5:r;return n?t:g(t)},from:function(e,t){return m.humanizeDuration(this.diff(e),!t)},fromNow:function(e){return this.from(m(),e)},calendar:function(){var e=this.diff(m().sod(),"days",!0),t=m.calendar,n=t.sameElse,e=-6>e?n:-1>e?t.lastWeek:0>e?t.lastDay:1>e?t.sameDay:2>e?t.nextDay:7>e?t.nextWeek:n;return this.format("function"==typeof e?e.apply(this):e)},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<m([this.year()]).zone()||this.zone()<m([this.year(),5]).zone()},day:function(e){var t=this._d.getDay();return"undefined"==typeof e?t:this.add({d:e-t})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};for(E=0;E<M.length;E++)v(M[E].toLowerCase(),M[E]);v("year","FullYear");var _=t.moment=m;_.fn.stripTime=function(){return this._d=new Date(864e5*Math.floor(this._d.valueOf()/864e5)),this},_.fn.yearDay=function(e){var t=Math.floor(this._d/864e5);return"undefined"==typeof e?t:this.add({d:e-t})},e=_().stripTime(),"undefined"!=typeof jQuery&&"function"==typeof document.addEventListener&&(jQuery.fn.kalendae=function(e){return this.each(function(n,r){"INPUT"===r.tagName?$(r).data("kalendae",new t.Input(r,e)):$(r).data("kalendae",new t($.extend({},{attachTo:r},e)))}),this})})();